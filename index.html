<style>
    body {
        font-family: Nunito, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        background-image: url('https://raw.githubusercontent.com/tecnomaslanus/ps2/main/imagenes/fondo.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
    }
    
    .header {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background-color: #f4f4f4;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
    }
    
    .catalogo {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
        padding: 10px;
        margin-top: 80px;
    }
    
    .item {
        cursor: pointer;
        padding: 10px;
        border: 2px solid #ccc;
        border-radius: 8px;
        background-color: #fff;
        text-align: center;
    }
    
    .item img {
        width: 100%;
        max-width: 120px;
        border-radius: 8px;
    }
    
    .seleccionados-container {
        position: fixed;
        top: 80px;
        right: 10px;
        width: 250px;
        background-color: #f4f4f4;
        padding: 10px;
        border-radius: 8px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: -2px 2px 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease-in-out;
    }

    .hidden {
        transform: translateX(110%);
    }

    .toggle-button {
        position: fixed;
        top: 80px;
        right: 10px;
        background-color: #007BFF;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 1001;
    }

    @media (max-width: 768px) {
        .header {
            flex-direction: column;
            gap: 10px;
            text-align: center;
        }
        
        .catalogo {
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }
        
        .item img {
            max-width: 100px;
        }
        
        .seleccionados-container {
            width: 90%;
            max-width: 300px;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            bottom: 10px;
        }
    }
</style>

<!-- Agregamos inputs para nombre y correo -->
<div>
    <input type="text" id="nombre" placeholder="Tu nombre">
    <input type="email" id="email" placeholder="Tu correo electrónico">
</div>
<button class="toggle-button" onclick="toggleSeleccionados()">Mostrar/Ocultar</button>
<button onclick="enviarCSV()">Enviar por correo</button>

<script>
    function toggleSeleccionados() {
        document.querySelector('.seleccionados-container').classList.toggle('hidden');
    }

    function enviarCSV() {
        let seleccionados = document.querySelectorAll('.item.selected');
        let nombres = Array.from(seleccionados).map(item => item.getAttribute('data-nombre'));
        
        if (nombres.length === 0) {
            alert("Seleccioná al menos un juego.");
            return;
        }
        
        let juegosSeleccionados = nombres.join("\n");
        let nombreUsuario = document.getElementById("nombre").value.trim();
        let emailAddress = document.getElementById("email").value.trim();
        
        if (!nombreUsuario || !emailAddress) {
            alert("Por favor, ingresá tu nombre y correo electrónico.");
            return;
        }
        
        if (!validateEmail(emailAddress)) {
            alert("Por favor, ingresá un correo electrónico válido.");
            return;
        }
        
        let formUrl = "https://docs.google.com/forms/d/e/1FAIpQLSeZ-FcR37MdgkUqVe4mqZrYdnSXLcy7qI9JqYpEegrECPTnjw/formResponse";
        
        let formData = new URLSearchParams();
        formData.append("entry.331571541", juegosSeleccionados);
        formData.append("entry.123456789", nombreUsuario); // Reemplazar con el campo real del formulario
        formData.append("emailAddress", emailAddress);
        
        fetch(formUrl, {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: formData.toString(),
            mode: "no-cors"
        })
        .then(() => alert("Datos enviados correctamente"))
        .catch(error => console.error("Error:", error));
    }

    function validateEmail(email) {
        let re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
</script>
